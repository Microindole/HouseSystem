<!-- æ–°å»ºæ–‡ä»¶ï¼štemplates/house/news_list.html -->
{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/house/news_list.css') }}">
{% endblock %}

{% block title %}æ–°é—»èµ„è®¯{% endblock %}

{% block body %}
<div class="news-list-container">
    <header class="page-header">
        <h1>æ–°é—»èµ„è®¯</h1>
        <p>äº†è§£æœ€æ–°çš„æˆ¿å±‹ç§Ÿèµä¿¡æ¯å’Œè¡Œä¸šåŠ¨æ€</p>
    </header>

    {% if news_pagination.items %}
    <div class="news-grid">
        {% for news in news_pagination.items %}
        <article class="news-card">
            <div class="news-card-content">
                <h2 class="news-card-title">
                    <a href="{{ url_for('house.news_detail', news_id=news.id) }}">{{ news.title }}</a>
                </h2>
                <p class="news-card-excerpt">
                    {{ news.desc[:120] if news.desc else 'æš‚æ— è¯¦ç»†æè¿°' }}{% if news.desc and news.desc|length > 120 %}...{% endif %}
                </p>
                <div class="news-card-meta">
                    <span class="news-date">
                        <i class="fas fa-calendar"></i> 
                        {{ news.time.strftime('%Yå¹´%mæœˆ%dæ—¥') if news.time else 'æœªçŸ¥æ—¶é—´' }}
                    </span>
                    {% if news.house_info %}
                    <span class="news-house">
                        <i class="fas fa-home"></i> 
                        {{ news.house_info.house_name }}
                    </span>
                    {% endif %}
                </div>
            </div>
            <div class="news-card-actions">
                <a href="{{ url_for('house.news_detail', news_id=news.id) }}" class="btn btn-primary">é˜…è¯»å…¨æ–‡</a>
            </div>
        </article>
        {% endfor %}
    </div>

    <!-- åˆ†é¡µæ§åˆ¶ -->
    {% if news_pagination.pages > 1 %}
    <div class="pagination">
        <ul class="pagination-list">
            {% if news_pagination.has_prev %}
                <li><a href="{{ url_for('house.news_list', page=1) }}">é¦–é¡µ</a></li>
                <li><a href="{{ url_for('house.news_list', page=news_pagination.prev_num) }}">ä¸Šä¸€é¡µ</a></li>
            {% endif %}
            {% for p in range(1, news_pagination.pages + 1) %}
                {% if p == news_pagination.page %}
                    <li class="active"><span>{{ p }}</span></li>
                {% else %}
                    <li><a href="{{ url_for('house.news_list', page=p) }}">{{ p }}</a></li>
                {% endif %}
            {% endfor %}
            {% if news_pagination.has_next %}
                <li><a href="{{ url_for('house.news_list', page=news_pagination.next_num) }}">ä¸‹ä¸€é¡µ</a></li>
                <li><a href="{{ url_for('house.news_list', page=news_pagination.pages) }}">æœ«é¡µ</a></li>
            {% endif %}
        </ul>
    </div>
    {% endif %}
    {% else %}
    <div class="no-news">
        <div class="no-news-icon">ğŸ“°</div>
        <h3>æš‚æ— æ–°é—»èµ„è®¯</h3>
        <p>ç›®å‰è¿˜æ²¡æœ‰å‘å¸ƒä»»ä½•æ–°é—»ï¼Œè¯·ç¨åå†æ¥æŸ¥çœ‹ã€‚</p>
        <a href="{{ url_for('house.house_list') }}" class="btn btn-primary">è¿”å›æˆ¿æºåˆ—è¡¨</a>
    </div>
    {% endif %}
</div>
{% endblock %}